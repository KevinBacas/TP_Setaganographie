/**************************************************************************/
/**************************************************************************/
/* Name ........ : error.h                                                */
/* Role ........ : Mini library to manipulate binary Hamming code.        */
/*                                                                        */
/* Author ...... : Morgan Barbier <morgan.barbier@ensicaen.fr>            */
/* Version ..... : V1.0 2013-01-20                                        */
/* Licence ..... : CC                                                     */
/**************************************************************************/
/**************************************************************************/
#ifndef __HCODE_H__
#define __HCODE_H__

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include "vector.h"
#include "matrix.h"
#include "error.h"

typedef struct HCODE
{
  uint n;
  uint k;
  uint m;
  matrix *H;
} hcode;


/**************************************************************************/
/**************************************************************************/
/* Function wich sets 'r' as the number of the row wich contains 'synd in */
/* matrix parity check matrix of 'C'.                                     */
/**************************************************************************/
/**************************************************************************/
void tool_where_is_row(uint* r, const vector* synd, const hcode* C);

/**************************************************************************/
/**************************************************************************/
/* Function which allocates and set the Hamming code 'C' which had for    */
/* parameter 'm'.                                                         */
/**************************************************************************/
/**************************************************************************/
void HCode_create(hcode** C, const uint m);

/**************************************************************************/
/**************************************************************************/
/* Function which frees correctly the Hamming code 'C'.                   */
/**************************************************************************/
/**************************************************************************/
void HCode_free(hcode** C);

/**************************************************************************/
/**************************************************************************/
/* Function which prints the Hamming code 'C' in the stream 'out'.        */
/**************************************************************************/
/**************************************************************************/
void HCode_fprint(FILE *out, const hcode *C);

/**************************************************************************/
/**************************************************************************/
/* Function which prints the Hamming code 'C' in the stream stdout.       */
/**************************************************************************/
/**************************************************************************/
void HCode_print(const hcode *C);

/**************************************************************************/
/**************************************************************************/
/* Function which set 'synd' as the syndrome of 'y' for 'C'.              */
/**************************************************************************/
/**************************************************************************/
void HCode_syndrome(vector* synd, const vector* y, const hcode *C);

/**************************************************************************/
/**************************************************************************/
/* Function which sets 'c' as the closest codeword of 'C' from 'y'.       */
/**************************************************************************/
/**************************************************************************/
void HCode_decode(vector* c, const vector* y, const hcode* C);

/**************************************************************************/
/**************************************************************************/
/* Function which sets 'r' as the coset leader of 'synd' in 'C'.          */
/**************************************************************************/
/**************************************************************************/
void HCode_get_coset_leader(vector *r, const vector *synd, const hcode *C);

#endif /* __HCODE_H__ */
